<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å°‹æ‰¾åŒç•Œè§’å¥½æœ‹å‹</title>
    <style>
        /* æ¸…æ–°æŸ”å’Œçš„ç²‰å½©èƒŒæ™¯èˆ‡å­—é«” */
        body {
            background-color: #F0F8FF; /* æ„›éº—çµ²è— */
            color: #4A4A4A; /* æ·±ç°æŸ”å’Œå­—é«” */
            font-family: 'Nunito', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            margin: 0;
            user-select: none;
        }

        h1 {
            color: #5C88C4;
            margin-bottom: 5px;
            font-size: 2.2rem;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
        }

        p.subtitle {
            color: #7A9B76;
            margin-bottom: 25px;
            font-size: 1.1rem;
            font-weight: bold;
        }

        .dashboard {
            display: flex;
            gap: 30px;
            font-size: 1.4rem;
            font-weight: bold;
            margin-bottom: 20px;
            background: #FFFFFF;
            padding: 10px 25px;
            border-radius: 20px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.05);
        }

        .score-display { color: #FFA07A; } /* æ·ºé®­é­šç´… */
        .time-display { color: #6495ED; } /* çŸ¢è»ŠèŠè— */

        .game-container {
            background: #FFFFFF;
            border-radius: 25px;
            padding: 40px;
            text-align: center;
            width: 90%;
            max-width: 550px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.08);
            position: relative;
            overflow: hidden;
        }

        .question {
            font-size: 1.8rem;
            margin-bottom: 10px;
            color: #333;
        }

        .target-angle {
            font-size: 3rem;
            color: #FF6B6B;
            font-weight: bold;
            margin-bottom: 30px;
        }

        .options {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .btn {
            background-color: #E6F2FF;
            color: #4A4A4A;
            border: 2px solid #B3D8FF;
            border-radius: 15px;
            padding: 15px;
            font-size: 1.4rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .btn:hover {
            background-color: #B3D8FF;
            transform: translateY(-3px);
            box-shadow: 0 5px 10px rgba(0,0,0,0.1);
        }

        .btn:active {
            transform: translateY(1px);
        }

        .feedback {
            margin-top: 20px;
            font-size: 1.2rem;
            font-weight: bold;
            height: 30px;
        }

        .correct { color: #2E8B57; } /* æµ·æ´‹ç¶  */
        .wrong { color: #DC143C; } /* çŒ©ç´… */

        .overlay {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(255, 255, 255, 0.95);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border-radius: 25px;
            z-index: 10;
        }

        .hidden { display: none !important; }

        .start-btn {
            background-color: #FFDAB9; /* èœœæ¡ƒè‰² */
            color: #D2691E;
            border: none;
            padding: 15px 35px;
            font-size: 1.5rem;
            font-weight: bold;
            border-radius: 30px;
            cursor: pointer;
            box-shadow: 0 4px 10px rgba(210, 105, 30, 0.2);
            transition: 0.3s;
        }

        .start-btn:hover {
            background-color: #FFC08B;
            transform: scale(1.05);
        }

        #final-score {
            font-size: 2.2rem;
            color: #FF8C00;
            margin-bottom: 25px;
        }
    </style>
</head>
<body>

    <h1>å°‹æ‰¾åŒç•Œè§’å¥½æœ‹å‹</h1>
    <p class="subtitle">CH1 ä¸‰è§’å‡½æ•¸ 1-1 åŒç•Œè§’ç·´ç¿’</p>

    <div class="dashboard">
        <div class="score-display">åˆ†æ•¸: <span id="score">0</span></div>
        <div class="time-display">æ™‚é–“: <span id="time">60</span>s</div>
    </div>

    <div class="game-container">
        <div id="start-screen" class="overlay">
            <h2 style="color: #5C88C4; margin-bottom: 10px;">æº–å‚™å¥½äº†å—ï¼Ÿ</h2>
            <p style="color: #666; margin-bottom: 30px; font-size: 1.1rem; line-height: 1.5;">
                æ‰¾å‡ºèˆ‡ä¸»è§’åº¦ç›¸å·® 360Â° æ•´æ•¸å€çš„åŒç•Œè§’ï¼<br>
                ç­”å° +10 åˆ†ï¼Œç­”éŒ¯ -5 åˆ†
            </p>
            <button class="start-btn" onclick="startGame()">é–‹å§‹æ¸¬é©—</button>
        </div>

        <div id="end-screen" class="overlay hidden">
            <h2 style="color: #5C88C4; font-size: 2rem;">æ™‚é–“åˆ°ï¼</h2>
            <div id="final-score">ç¸½åˆ†: 0</div>
            <button class="start-btn" onclick="startGame()">å†ç©ä¸€æ¬¡</button>
        </div>

        <div class="question">è«‹å•ä¸‹åˆ—å“ªå€‹è§’æ˜¯å®ƒçš„åŒç•Œè§’ï¼Ÿ</div>
        <div id="target-angle" class="target-angle">0Â°</div>
        
        <div class="options" id="options-container">
            </div>
        <div id="feedback-msg" class="feedback"></div>
    </div>

    <script>
        let score = 0;
        let timeLeft = 60;
        let timerInterval;
        let correctAnswer = 0;

        const scoreEl = document.getElementById('score');
        const timeEl = document.getElementById('time');
        const targetAngleEl = document.getElementById('target-angle');
        const optionsContainer = document.getElementById('options-container');
        const feedbackMsg = document.getElementById('feedback-msg');
        const startScreen = document.getElementById('start-screen');
        const endScreen = document.getElementById('end-screen');
        const finalScoreEl = document.getElementById('final-score');

        // å¸¸è¦‹çš„ä¸»è§’åº¦åŸºç¤æ± 
        const baseAngles = [0, 30, 45, 60, 90, 120, 135, 150, 180, 210, 225, 240, 270, 300, 315, 330];

        function startGame() {
            score = 0;
            timeLeft = 60;
            scoreEl.textContent = score;
            timeEl.textContent = timeLeft;
            feedbackMsg.textContent = "";
            
            startScreen.classList.add('hidden');
            endScreen.classList.add('hidden');
            
            generateQuestion();
            
            clearInterval(timerInterval);
            timerInterval = setInterval(() => {
                timeLeft--;
                timeEl.textContent = timeLeft;
                if (timeLeft <= 0) {
                    endGame();
                }
            }, 1000);
        }

        function endGame() {
            clearInterval(timerInterval);
            finalScoreEl.textContent = `ç¸½åˆ†: ${score} åˆ†`;
            endScreen.classList.remove('hidden');
        }

        function generateQuestion() {
            // éš¨æ©ŸæŠ½å–ä¸€å€‹åŸºç¤è§’åº¦
            const baseAngle = baseAngles[Math.floor(Math.random() * baseAngles.length)];
            
            // æ±ºå®šç•«é¢ä¸Šé¡¯ç¤ºçš„ç›®æ¨™è§’åº¦ (å¯èƒ½æ˜¯åŸè§’åº¦åŠ ä¸Šå¹¾å€‹ 360 åº¦)
            const targetK = Math.floor(Math.random() * 3) - 1; // -1, 0, 1
            const targetDisplayAngle = baseAngle + targetK * 360;
            targetAngleEl.textContent = targetDisplayAngle + "Â°";

            // ç”¢ç”Ÿæ­£ç¢ºç­”æ¡ˆ (åŒç•Œè§’)
            // ç¢ºä¿èˆ‡ç›®æ¨™è§’åº¦ä¸åŒï¼Œä¹˜æ•¸ç‚ºéé›¶çš„æ•´æ•¸
            let kCorrect;
            do {
                kCorrect = Math.floor(Math.random() * 5) - 2; // -2, -1, 1, 2
            } while (kCorrect === 0);
            
            correctAnswer = targetDisplayAngle + kCorrect * 360;

            // ç”¢ç”Ÿ 3 å€‹éŒ¯èª¤é¸é … (ç¢ºä¿å®ƒå€‘é™¤ä»¥360çš„é¤˜æ•¸ä¸ç­‰æ–¼ç›®æ¨™è§’åº¦çš„é¤˜æ•¸)
            let wrongOptions = [];
            while (wrongOptions.length < 3) {
                // ç”¢ç”Ÿä¸€å€‹éš¨æ©Ÿè§’åº¦ (-720 åˆ° 720 ä¹‹é–“ï¼Œä¸”ç‚º 15 çš„å€æ•¸)
                let randWrong = (Math.floor(Math.random() * 97) - 48) * 15;
                
                // æª¢æŸ¥æ˜¯å¦ä¸å°å¿ƒè®ŠæˆåŒç•Œè§’ï¼Œæˆ–è€…é¸é …é‡è¤‡
                let isCoterminal = ((randWrong % 360 + 360) % 360) === ((baseAngle % 360 + 360) % 360);
                if (!isCoterminal && !wrongOptions.includes(randWrong)) {
                    wrongOptions.push(randWrong);
                }
            }

            // çµ„åˆé¸é …ä¸¦æ‰“äº‚é †åº
            let options = [correctAnswer, ...wrongOptions];
            options = options.sort(() => Math.random() - 0.5);

            // æ¸²æŸ“æŒ‰éˆ•
            optionsContainer.innerHTML = '';
            options.forEach(opt => {
                const btn = document.createElement('button');
                btn.className = 'btn';
                btn.textContent = opt + "Â°";
                btn.onclick = () => checkAnswer(opt);
                optionsContainer.appendChild(btn);
            });
        }

        function checkAnswer(selectedOpt) {
            if (selectedOpt === correctAnswer) {
                score += 10;
                feedbackMsg.textContent = "ç­”å°äº†ï¼ç›¸å·® 360Â° çš„å€æ•¸ï¼ ğŸ‘";
                feedbackMsg.className = "feedback correct";
            } else {
                score -= 5;
                feedbackMsg.textContent = `ç­”éŒ¯äº†ï¼æ­£ç¢ºç­”æ¡ˆæ˜¯ ${correctAnswer}Â° ğŸ˜¢`;
                feedbackMsg.className = "feedback wrong";
            }
            scoreEl.textContent = score;

            // ç¦ç”¨æŒ‰éˆ•çŸ­æš«å»¶é²å¾Œæ›é¡Œ
            const btns = document.querySelectorAll('.btn');
            btns.forEach(b => b.disabled = true);
            
            setTimeout(() => {
                feedbackMsg.textContent = "";
                generateQuestion();
            }, 1000); // åœç•™1ç§’è®“å­¸ç”Ÿçœ‹æ¸…æ¥šå›é¥‹
        }
    </script>
</body>
</html>