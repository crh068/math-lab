<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è§’åº¦æ›ç®—æ¼”ç¤ºï¼šå–®ä½é‡æ›¿æ›çµ‚æ¥µç‰ˆ</title>
    <style>
        :root {
            --primary-blue: #2980b9;
            --accent-green: #27ae60;
            --bg-color: #f0f2f5;
            --board-bg: #ffffff;
        }

        body {
            background-color: var(--bg-color);
            color: #333;
            font-family: 'Segoe UI', "Microsoft JhengHei", sans-serif;
            margin: 0;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        h1 { color: #2c3e50; margin-bottom: 5px; }
        .subtitle { color: #7f8c8d; margin-bottom: 20px; font-weight: bold; }

        .layout-container {
            display: grid;
            grid-template-columns: 350px 1fr;
            gap: 20px;
            max-width: 1200px;
            width: 100%;
        }

        .control-panel {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
            display: flex;
            flex-direction: column;
            gap: 15px;
            height: fit-content;
        }

        .mode-btn {
            width: 100%;
            padding: 12px;
            margin-bottom: 10px;
            border: 2px solid var(--primary-blue);
            background: white;
            color: var(--primary-blue);
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
            transition: 0.3s;
        }

        .mode-btn.active {
            background: var(--primary-blue);
            color: white;
        }

        .input-box {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            border: 1px solid #ddd;
        }

        .display-area {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .panel-header {
            font-weight: bold;
            color: #7f8c8d;
            margin-bottom: 10px;
        }

        .board {
            background: var(--board-bg);
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
            border-top: 5px solid #2c3e50;
            min-height: 480px;
        }

        .math-row {
            font-size: 1.7rem;
            margin-bottom: 22px;
            display: flex;
            align-items: center;
            opacity: 0;
            transform: translateY(10px);
            transition: 0.5s all ease;
        }

        .math-row.visible { opacity: 1; transform: translateY(0); }

        .explanation-card {
            background: #fffbe6;
            border-left: 5px solid #f1c40f;
            padding: 15px;
            margin-bottom: 15px;
            font-size: 1.1rem;
            line-height: 1.6;
            opacity: 0;
            transform: translateX(20px);
            transition: 0.5s all ease;
        }

        .explanation-card.visible { opacity: 1; transform: translateX(0); }

        .frac {
            display: inline-flex;
            flex-direction: column;
            vertical-align: middle;
            text-align: center;
            font-family: 'Times New Roman', serif;
            font-style: italic;
            margin: 0 5px;
        }
        .frac .top { border-bottom: 2px solid #333; padding: 0 5px; }
        .frac .bottom { padding: 0 5px; }

        .btn-next {
            background: var(--accent-green);
            color: white;
            border: none;
            padding: 15px;
            border-radius: 8px;
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
        }
        .btn-next:disabled { background: #ccc; }

        .highlight { color: #e74c3c; font-weight: bold; }
        .unit-label { color: #2980b9; font-weight: bold; }
    </style>
</head>
<body>

    <h1>è§’åº¦æ›ç®—ï¼šå–®ä½é‡æ›¿æ›æ¼”ç¤º</h1>
    <p class="subtitle">1-1 è§’çš„åº¦é‡èˆ‡æ›ç®—ï¼ˆåš´è¬¹å–®ä½æ¨å°ç‰ˆï¼‰</p>

    <div class="layout-container">
        <div class="control-panel">
            <button id="btn-deg2rad" class="mode-btn active" onclick="setMode('deg2rad')">åº¦æ•¸ â” å¼§åº¦</button>
            <button id="btn-rad2deg" class="mode-btn" onclick="setMode('rad2deg')">å¼§åº¦ â” åº¦æ•¸</button>

            <div id="input-area" class="input-box"></div>

            <button class="btn-next" id="next-btn" onclick="runNextStep()">ä¸‹ä¸€æ­¥ï¼šå±•é–‹æ¨å°</button>
            <button style="margin-top:10px; border:none; background:none; cursor:pointer; color:#7f8c8d; text-decoration:underline;" onclick="reset()">é‡æ–°é–‹å§‹</button>
        </div>

        <div class="display-area">
            <div>
                <div class="panel-header">ğŸ“ è¨ˆç®—æµç¨‹</div>
                <div class="board" id="math-board"></div>
            </div>
            <div>
                <div class="panel-header">ğŸ’¡ æ•™å­¸è§£èªª</div>
                <div class="board" id="explanation-board" style="background: #fcfcfc; border-top: 5px solid #f1c40f;"></div>
            </div>
        </div>
    </div>

    <script>
        let mode = 'deg2rad';
        let stepIndex = 0;
        let steps = [];

        function gcd(a, b) { return b === 0 ? Math.abs(a) : gcd(b, a % b); }

        function setMode(m) {
            mode = m;
            document.getElementById('btn-deg2rad').className = mode === 'deg2rad' ? 'mode-btn active' : 'mode-btn';
            document.getElementById('btn-rad2deg').className = mode === 'rad2deg' ? 'mode-btn active' : 'mode-btn';
            reset();
            renderInput();
        }

        function renderInput() {
            const container = document.getElementById('input-area');
            if (mode === 'deg2rad') {
                container.innerHTML = `<label>è¼¸å…¥åº¦æ•¸ï¼š</label><input type="number" id="input-val" value="135" style="width:70px;"> Â°`;
            } else {
                container.innerHTML = `<label>è¼¸å…¥å¼§åº¦ï¼š</label><br>
                    <input type="number" id="input-num" value="3" style="width:40px;"> Ï€ / 
                    <input type="number" id="input-den" value="4" style="width:40px;"> å¼§åº¦`;
            }
        }

        function reset() {
            stepIndex = 0;
            steps = [];
            document.getElementById('math-board').innerHTML = '';
            document.getElementById('explanation-board').innerHTML = '';
            document.getElementById('next-btn').disabled = false;
            document.getElementById('next-btn').innerText = "é–‹å§‹æ¼”ç¤º â”";
        }

        function buildFrac(top, bottom) {
            return `<span class="frac"><span class="top">${top}</span><span class="bottom">${bottom}</span></span>`;
        }

        function prepareSteps() {
            steps = [];
            if (mode === 'deg2rad') {
                const val = parseInt(document.getElementById('input-val').value);
                const g = gcd(val, 180);
                const n = val / g;
                const d = 180 / g;

                steps.push({
                    math: `${val}Â°`,
                    note: `å¯«ä¸‹é¡Œç›®è¦æ±‚çš„åº¦æ•¸ï¼š<span class="highlight">${val}Â°</span>ã€‚`
                });
                steps.push({
                    math: `= ${val} &times; <span class="unit-label">1Â°</span>`,
                    note: `å°‡è§’åº¦çœ‹æˆ <span class="highlight">${val} å€‹å–®ä½åº¦ (1Â°)</span> çš„ç´¯ç©ã€‚`
                });
                steps.push({
                    math: `= ${val} &times; ${buildFrac('Ï€', '180')}`,
                    note: `å–®ä½é‡æ›¿æ›ï¼šå·²çŸ¥ <span class="unit-label">1Â° = ${buildFrac('Ï€', '180')} å¼§åº¦</span>ï¼Œå°‡å…¶ä»£å…¥ç®—å¼ã€‚`
                });
                steps.push({
                    math: `= ${buildFrac(val + 'Ï€', '180')}`,
                    note: `å°‡æ•¸å€¼åˆä½µè‡³åˆ†å­ï¼Œæº–å‚™é€²è¡Œç´„åˆ†ã€‚`
                });
                steps.push({
                    math: `= ${d === 1 ? (n === 1 ? 'Ï€' : n + 'Ï€') : buildFrac((n === 1 ? '' : n) + 'Ï€', d)}`,
                    note: `åŒé™¤ä»¥æœ€å¤§å…¬å› æ•¸ <span class="highlight">${g}</span>ï¼Œå¾—åˆ°æœ€çµ‚å¼§åº¦å€¼ã€‚`
                });
            } else {
                const num = parseInt(document.getElementById('input-num').value);
                const den = parseInt(document.getElementById('input-den').value);
                const targetDeg = (num * 180 / den).toFixed(1);

                steps.push({
                    math: `${buildFrac(num + 'Ï€', den)} å¼§åº¦`,
                    note: `å¯«ä¸‹é¡Œç›®è¦æ±‚çš„å¼§åº¦å€¼ï¼š<span class="highlight">${num}Ï€ / ${den} å¼§åº¦</span>ã€‚`
                });
                steps.push({
                    math: `= ${buildFrac(num + 'Ï€', den)} &times; <span class="unit-label">1 å¼§åº¦</span>`,
                    note: `å°‡è§’åº¦çœ‹æˆè©²æ•¸å€¼èˆ‡ <span class="highlight">å–®ä½å¼§åº¦ (1 å¼§åº¦)</span> çš„ä¹˜ç©ã€‚`
                });
                steps.push({
                    math: `= ${buildFrac(num + 'Ï€', den)} &times; ${buildFrac('180Â°', 'Ï€')}`,
                    note: `å–®ä½é‡æ›¿æ›ï¼šå·²çŸ¥ <span class="unit-label">1 å¼§åº¦ = ${buildFrac('180Â°', 'Ï€')}</span>ï¼Œä»£å…¥ä»¥æ›å›åº¦æ•¸åˆ¶ã€‚`
                });
                steps.push({
                    math: `= ${buildFrac(num, den)} &times; 180Â°`,
                    note: `è§€å¯Ÿç®—å¼ï¼šåˆ†å­èˆ‡åˆ†æ¯çš„ <span class="highlight">Ï€</span> å‰›å¥½å¯ä»¥äº’ç›¸ç´„æ‰ã€‚`
                });
                steps.push({
                    math: `= ${num} &times; ${180/den}Â°`,
                    note: `è¨ˆç®—ç´„åˆ†ï¼š180Â° èˆ‡åˆ†æ¯ ${den} å…ˆé€²è¡ŒåŒ–ç°¡ã€‚`
                });
                steps.push({
                    math: `= ${targetDeg}Â°`,
                    note: `æœ€å¾Œè¨ˆç®—ä¹˜ç©ï¼Œå¾—åˆ°çµæœç‚º <span class="highlight">${targetDeg}Â°</span>ã€‚`
                });
            }
        }

        function runNextStep() {
            if (stepIndex === 0) prepareSteps();

            if (stepIndex < steps.length) {
                const mBoard = document.getElementById('math-board');
                const mRow = document.createElement('div');
                mRow.className = 'math-row';
                mRow.innerHTML = steps[stepIndex].math;
                mBoard.appendChild(mRow);
                setTimeout(() => mRow.classList.add('visible'), 50);

                const eBoard = document.getElementById('explanation-board');
                const eCard = document.createElement('div');
                eCard.className = 'explanation-card';
                eCard.innerHTML = `<strong>æ­¥é©Ÿ ${stepIndex + 1}:</strong><br>${steps[stepIndex].note}`;
                eBoard.appendChild(eCard);
                setTimeout(() => eCard.classList.add('visible'), 50);

                mBoard.scrollTop = mBoard.scrollHeight;
                eBoard.scrollTop = eBoard.scrollHeight;

                stepIndex++;
                if (stepIndex === steps.length) {
                    document.getElementById('next-btn').disabled = true;
                    document.getElementById('next-btn').innerText = "æ¼”ç¤ºå®Œæˆ";
                }
            }
        }

        renderInput();
    </script>
</body>
</html>